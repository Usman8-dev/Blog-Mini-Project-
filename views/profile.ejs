<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Profile | TechFlow</title>
    <link rel="stylesheet" href="/stylesheets/profileAddStyle.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Profile Header -->
        <div class="profile-header">
            <div class="user-info">
                <!-- <div class="avatar">
                    <span> <img src="/images/uploads/<%= user.profilePicture %>" alt=""> </span>
                    <a href="/showPic">change profile image icon</a>
                </div> -->
                <div class="avatar-container">
                    <!-- Avatar Image -->
                    <div class="avatar">
                        <img 
                            src="/images/uploads/<%= user.profilePicture || 'default-avatar.png' %>" 
                            alt="<%= user.name %>'s profile picture"
                            class="avatar-img"
                            onerror="this.src='/images/default-avatar.png'"
                        />
                        
                        <!-- Change Icon Overlay -->
                        <a href="/showPic" class="change-photo-overlay" title="Change Profile Picture">
                            <i class="fas fa-camera"></i>
                        </a>
                    </div>

                    <!-- Optional: Username below -->
                    <p class="username">@<%= user.username || user.email.split('@')[0] %></p>
                </div>
                <div>
                    <h1> <%= user.name %></h1>
                    <p class="username"><%= user.email %></p>
                    <!-- <p class="bio">Full-stack developer | Coffee addict | Building cool things</p> -->
                </div>
            </div>
            <div>

                <a href="/mainprofile" class="new-post-btn">+ New Post</a>
                <a href="/" class="new-post-btn">Back</a>
            </div>
        </div>

        <!-- Posts Section -->
        <div class="posts-container">
            <h2>Your Posts</h2>
                <% if(user.posts.length > 0 ){ %>
                    <% user.posts.reverse().    forEach(function(post){ %>
                            <!-- Sample Post 1 -->
                                        <div class="post-card">
                                            <div class="post-header">
                                                <h3 class="post-title"><%= post.name %></h3>
                                                <span class="post-date"><%= post.date.toString().slice(0, 21) %></span>
                                            </div>
                                            <p class="post-content">
                                                <%= post.content %>
                                            </p>
                                            <div class="post-actions">
                                                <a href="#" class="like-btn">Like (12)</a>
                                                <a href="/edit/<%= post._id %>" class="edit-btn">Edit</a>
                                            </div>
                                        </div>
                            <% }) %>
                <% }else{ %>
                No Post yet!!
                <% } %>
        
        </div>

        <!-- Logout -->
        <div class="logout">
            <a href="/logout">Logout</a>
        </div>
    </div>
</body>
</html>